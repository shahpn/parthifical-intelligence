import tensorflow as tf
import numpy as np
import re

# Define the categories we want to classify user input into
categories = ['Course Help', 'University History', 'Specific Location', 'General Advising']

# Define the training data for each category
course_data = ["What is CMPSC 430 about?", "What's the description for CMPSC 473?", "Tell me about CMPSC 476", "What is CMPSC 483 about?", "What are the prerequisites for CMPSC 392?", "What topics are covered in CMPSC 485?", "Can you give me more information about CMPSC 487?", "What is IST 402 about?", "What's the description for IST 441?", "Tell me about IST 451", "What is IST 462 about?", "What topics are covered in IST 471?", "Can you give me more information about IST 481?", "What is the textbook for CMPSC 121?", "Can you tell me about the workload for CMPSC 132?", "What programming languages are used in CMPSC 150?", "What's the grading policy for CMPSC 201?", "What is the structure of CMPSC 221?", "What kind of assignments are given in CMPSC 240?", "Can you give me more information about CMPSC 261?", "What are the prerequisites for CMPSC 270?", "Tell me about the content covered in CMPSC 271", "What is the focus of CMPSC 280?", "What's the description for CMPSC 312?", "Can you give me more information about CMPSC 320?", "What is the workload like for CMPSC 321?", "What are the prerequisites for CMPSC 331?", "Tell me about the exams in CMPSC 332", "What kind of programming assignments are given in CMPSC 335?", "What's the course schedule for CMPSC 360?", "Can you give me more information about CMPSC 365?", "What is the focus of CMPSC 370?", "What is the workload like for CMPSC 375?", "What are the prerequisites for CMPSC 377?", "Tell me about the group project in CMPSC 380", "What's the description for CMPSC 381?", "What kind of software development is covered in CMPSC 390D?", "What is the focus of CMPSC 391?", "Can you give me more information about CMPSC 392?", "What's the structure of CMPSC 395?", "Tell me about the course objectives in CMPSC 398", "What are the prerequisites for CMPSC 401?", "What's the course schedule for CMPSC 402?", "What is the workload like for CMPSC 403?", "What's the description for CMPSC 405?", "Can you give me more information about CMPSC 406?", "What kind of projects are given in CMPSC 407?", "What are the prerequisites for CMPSC 408?", "Tell me about the group project in CMPSC 412", "What is the focus of CMPSC 416?", "What is CMPSC 101 about?", "Can you tell me more about IST 110?", "What is the focus of CMPSC 122?", "I'm interested in cybersecurity, what classes should I take?", "What is the difference between CMPSC 221 and CMPSC 311?", "Is there a course on data mining?", "What is the course structure for CMPSC 465?", "Can you recommend a course to learn about artificial intelligence?", "What is the prerequisite for CMPSC 360?", "Can you tell me more about IST 402?", "I want to learn more about computer graphics. What class should I take?", "What is the workload like for CMPSC 473?", "Can you tell me more about CMPSC 421?", "What is the focus of CMPSC 360?", "Is there a course on machine learning?", "What class should I take to learn about software engineering?", "What is the difference between IST 240 and IST 250?", "Can you recommend a course to learn about natural language processing?", "What is the prerequisite for CMPSC 221?", "Can you tell me more about IST 452?", "I want to learn more about web development. What class should I take?", "What is the workload like for CMPSC 473?", "Can you tell me more about CMPSC 431?", "What is the focus of CMPSC 360?", "Is there a course on computer vision?", "What class should I take to learn about database systems?", "What is the difference between CMPSC 360 and CMPSC 461?", "Can you recommend a course to learn about deep learning?", "What is the prerequisite for CMPSC 465?", "Can you tell me more about IST 451?", "I want to learn more about mobile app development. What class should I take?", "What is the workload like for CMPSC 122?", "Can you tell me more about CMPSC 452?", "What is the focus of CMPSC 360?", "Is there a course on computer networks?", "What class should I take to learn about data structures and algorithms?", "What is the difference between CMPSC 473 and CMPSC 475?", "Can you recommend a course to learn about computer vision?", "What is the prerequisite for CMPSC 431?", "Can you tell me more about IST 420?", "I want to learn more about web development. What class should I take?", "What is the workload like for CMPSC 221?", "Can you tell me more about CMPSC 461?", "What is the focus of CMPSC 360?", "Is there a course on computer architecture?", "What class should I take to learn about software development?", "What is the difference between CMPSC 465 and CMPSC 466?", "Can you recommend a course to learn about natural language processing?", "What is the prerequisite for CMPSC 452?", "Can you tell me more about IST 432?"]
history_data = ["When did the Computer Science Degree become part of the University?", "When was the University founded?", "Can you tell me about the history of the university?", "Who was the first president of the university?", "What is the oldest building on campus?", "Where can I find the statue of the founder of the university?", "What is the significance of the clock tower on campus?", "Can you tell me about the history of the library?", "What is the history of the athletic programs at the university?", "Where can I find information about notable alumni of the university?", "What is the story behind the mural in the student center?", "Can you tell me about the history of the art department at the university?", "Where can I find information about the university's involvement in the Civil Rights Movement?", "What is the history of the theater program at the university?", "Can you tell me about the history of the university's mascot?", "Where can I find information about the history of the university's student government?", "What is the significance of the campus fountain?", "Can you tell me about the history of the university's international programs?", "Where can I find information about the university's involvement in environmental sustainability?", "What is the history of the university's community service programs?", "Can you tell me about the history of the university's student newspaper?", "Where can I find information about the university's research initiatives?", "What is the history of the university's architecture?", "Can you tell me about the history of the university's founding fathers?", "Where can I find information about the university's participation in sports championships?", "What is the story behind the university's alma mater?", "Can you tell me about the history of the university's academic honors programs?", "Where can I find information about the university's involvement in the Vietnam War?", "What is the history of the university's Greek life?", "Can you tell me about the history of the university's diversity and inclusion initiatives?", "Where can I find information about the university's notable faculty members?", "What is the history of the university's mascot costume design?", "Can you tell me about the history of the university's journalism program?", "Where can I find information about the university's partnerships with other institutions?", "What is the history of the university's relationship with the local community?", "Can you tell me about the history of the university's music department?", "Where can I find information about the university's involvement in the women's rights movement?", "What is the history of the university's alumni association?", "Can you tell me about the history of the university's traditions?", "Where can I find information about the university's involvement in the arts?", "What is the history of the university's campus radio station?", "Can you tell me about the history of the university's language programs?", "Where can I find information about the university's involvement in international diplomacy?", "What is the history of the university's academic departments?", "Can you tell me about the history of the university's relationship with the military?", "Where can I find information about the university's involvement in the Civil War?", "What is the history of the university's community outreach programs?", "Can you tell me about the history of the university's mascot naming contest?", "Where can I find information about the university's involvement in social justice movements?", "What is the history of the university's alumni network?", "What was the first building on campus?", "Can you tell me about the founding of the university?", "When was the first football game held on campus?", "Tell me about the history of the university's mascot.", "When was the university established?", "What was the original purpose of the university?", "When was the university's first library built?", "Tell me about the history of the university's campus tours.", "When was the first graduation ceremony held?", "What was the university's first major academic program?", "Can you tell me about the university's involvement in World War II?", "When was the university's first student organization formed?", "What was the university's response to the Civil Rights Movement?", "Tell me about the history of the university's campus newspaper.", "When was the first international student admitted to the university?", "What was the university's role in the feminist movement?", "Can you tell me about the history of the university's architecture?", "When was the university's first research center established?", "Tell me about the university's role in the space race.", "When was the university's first African American student admitted?", "What was the university's involvement in the Vietnam War?", "Can you tell me about the history of the university's student government?", "When was the university's first LGBT organization founded?", "What was the university's response to the 9/11 attacks?", "Tell me about the history of the university's performing arts programs.", "When was the university's first diversity and inclusion initiative launched?", "What was the university's involvement in the Civil War?", "Can you tell me about the history of the university's famous alumni?", "When was the university's first online course offered?", "What was the university's role in the Cold War?", "Tell me about the history of the university's athletic programs.", "When was the university's first campus radio station established?", "What was the university's involvement in the Women's Rights Movement?", "Can you tell me about the history of the university's campus traditions?", "When was the university's first student union building constructed?", "What was the university's response to the Great Depression?", "Tell me about the history of the university's academic departments.", "When was the university's first student housing facility built?", "What was the university's involvement in the American Civil Rights Movement?", "Can you tell me about the history of the university's school spirit?", "When was the university's first online degree program offered?", "What was the university's role in the development of the Internet?", "Tell me about the history of the university's community service programs.", "When was the university's first international campus established?", "What was the university's response to the outbreak of World War I?", "Can you tell me about the history of the university's international student exchange programs?", "When was the university's first study abroad program established?", "What was the university's involvement in the American Civil War?", "Tell me about the history of the university's academic research initiatives.", "When was the university's first honors program established?"]
location_data = ["Where is the student center located?", "Can you tell me where the library is?", "I'm looking for the physics building, where is it?", "Where is the nearest coffee shop on campus?", "Can you direct me to the chemistry department?", "I need to find the registrar's office, where is it located?", "Can you tell me where the nearest bus stop is?", "Where can I find the biology lab?", "I'm trying to find the art building, where is it?", "Where is the gym located on campus?", "Can you help me find the bookstore?", "Where is the computer science department located?", "I'm looking for the history building, where is it?", "Can you direct me to the math department?", "Where can I find the music building?", "I need to find the health center, where is it located?", "Can you tell me where the nearest parking lot is?", "Where is the engineering building located?", "I'm trying to find the business school, where is it?", "Where is the dining hall on campus?", "Where is the language center located?", "Can you tell me where the theater department is?", "I need to find the psychology building, where is it located?", "Can you direct me to the student union?", "Where can I find the philosophy department?", "I'm trying to find the sociology building, where is it?", "Where is the anthropology department located?", "Can you help me find the education building?", "Where is the nearest vending machine on campus?", "I'm looking for the geology building, where is it?", "Can you tell me where the language lab is located?", "Where is the architecture building on campus?", "I need to find the foreign language department, where is it located?", "Can you direct me to the physics lab?", "Where can I find the student services office?", "I'm trying to find the journalism department, where is it?", "Where is the nearest ATM on campus?", "Can you help me find the statistics department?", "Where is the environmental science building located?", "I need to find the astronomy building, where is it located?", "Can you tell me where the nearest restroom is?", "Where is the gender studies department on campus?", "I'm trying to find the engineering lab, where is it?", "Can you direct me to the political science building?", "Where can I find the dance department?", "I'm looking for the women's center, where is it located?", "Where is the nearest bus stop for the shuttle?", "Can you help me find the film studies building?", "Where is the physics department located?", "I need to find the nearest printer on campus.", "Where can I find the library?", "Where is the student center?", "Where can I find the bookstore?", "Where is the gym located?", "Where can I find the nearest bathroom?", "Where is the cafeteria located?", "Where can I find the parking lot?", "Where is the nearest ATM?", "Where can I find the computer lab?", "Where is the dormitory located?", "Where can I find the health center?", "Where is the admissions office located?", "Where can I find the financial aid office?", "Where is the registrar's office located?", "Where can I find the counseling center?", "Where is the career center located?", "Where can I find the bookstore?", "Where is the nearest bus stop?", "Where can I find the campus map?", "Where is the art museum located?", "Where can I find the student lounge?", "Where is the nearest coffee shop?", "Where can I find the post office?", "Where is the theater located?", "Where can I find the sports fields?", "Where is the science building located?", "Where can I find the music department?", "Where is the nearest vending machine?", "Where can I find the parking garage?", "Where is the campus police station located?", "Where can I find the graduate school office?", "Where is the main lecture hall located?", "Where can I find the student government office?", "Where is the nearest bike rack?", "Where can I find the environmental studies department?", "Where is the student newspaper office located?", "Where can I find the multicultural center?", "Where is the nearest water fountain?", "Where can I find the international studies office?", "Where is the bookstore located?", "Where can I find the volunteer center?", "Where is the nearest printer?", "Where can I find the history department?", "Where is the political science department located?", "Where can I find the language lab?", "Where is the nearest elevator?", "Where can I find the chemistry department?", "Where is the math department located?", "Where can I find the physics department?", "Where is the engineering building located?"]
advising_data = ["Can you help me choose my classes for next semester?", "How do I get in touch with my academic advisor?", "When are office hours for Professor Johnson?", "Where can I find tutoring services for math?", "How do I schedule an appointment with the career center?", "Can you help me find a tutor for chemistry?", "Where can I find information about study abroad programs?", "How do I declare my major?", "Can you help me find resources for writing my thesis?", "Where can I find information about internships?", "How do I apply for scholarships?", "Can you tell me about the requirements for graduating with honors?", "Where can I find information about graduate programs?", "How do I find out about research opportunities?", "Can you help me find a summer job or internship?", "Where can I find information about studying abroad?", "How do I change my major?", "Can you tell me more about academic support services on campus?", "Where can I find information about career fairs?", "How do I find out about campus events and activities?", "What are the requirements for a double major?", "How do I declare or change my major/minor?", "Can you tell me about the honors program in computer science?", "What are the pre-requisites for graduate-level courses in computer science?", "How do I apply for an internship in the computer science department?", "Can you provide me with information on research opportunities in computer science?", "What is the process for getting academic credit for an independent study in computer science?", "How can I find a tutor for a particular computer science course?", "Can you tell me about the study abroad opportunities for computer science majors?", "How do I apply for a co-op position in computer science?", "Can you provide information about scholarships available for computer science majors?", "What resources are available to help me plan my course schedule?", "Can you help me find information on graduate school opportunities in computer science?", "How can I get involved in a computer science club or organization?", "Can you provide me with information on the availability of career services for computer science majors?", "How do I request a letter of recommendation from a computer science professor?", "Can you tell me about the requirements for a minor in computer science?", "How can I get involved in undergraduate research in computer science?", "Can you provide me with information about the academic integrity policy in the computer science department?", "What is the process for appealing a grade in a computer science course?", "How do I register for a computer science course that is full?", "Can you provide me with information about the academic advising process for computer science majors?", "What is the process for applying for a teaching assistantship in computer science?", "Can you tell me about the process for applying to graduate school in computer science?", "What is Professor Deward's Email?", "How can I find out more about career opportunities in computer science?", "Can you provide me with information about the availability of tutoring services for computer science courses?", "What is the process for withdrawing from a computer science course?", "Can you tell me about the availability of summer courses in computer science?", "How can I get involved in community outreach programs in computer science?", "Can you tell me who my academic advisor is and how I can contact them?", "What's the best way to schedule an appointment with my advisor?", "I need to talk to someone about changing my major. Who should I contact?", "Can you help me find the contact information for the advising office?", "I'm having trouble finding the right courses to take. Is there anyone who can help me with that?", "How can I get in touch with the faculty advisor for my major?", "Is there a way to see my academic progress and make sure I'm on track to graduate?", "Who should I contact if I have questions about transfer credits?", "What are the office hours for the advising center?", "Can you help me find the email for a particular professor who I need to contact about my grades?", "I need some advice on which classes to take next semester. Who can I talk to about that?", "How can I request a change of advisor?", "Who should I contact if I need to take a leave of absence from school?", "How do I know which classes I need to take to fulfill my major requirements?", "Is there someone who can help me with my course schedule for next semester?", "Can you help me find the contact information for the academic counseling center?", "How can I get help with academic accommodations for a disability?", "What should I do if I'm having difficulty with a particular class?", "Can you tell me more about the tutoring services offered by the advising office?", "Who can I talk to if I have questions about graduate school?", "How can I get advice on study abroad programs?", "Can you tell me more about the internship opportunities available for my major?", "Who should I contact if I'm interested in undergraduate research opportunities?", "How can I find out about scholarship opportunities for my major?", "Can you help me find the contact information for the department chair for my major?", "I need to know how to withdraw from a course. Who can I talk to about that?", "Who should I contact if I'm interested in an honors program for my major?", "How can I get advice on career planning and job search strategies?", "Can you help me find the email for a particular professor who I need to ask about writing a letter of recommendation?", "What's the best way to get in touch with someone in the advising office during the summer?", "What is Professor Emily's Email?", "Who can I talk to if I'm having trouble deciding on a major?", "How can I find out about study groups or peer tutoring services for my courses?", "Can you help me find the office hours for a particular faculty advisor?", "What should I do if I'm struggling with time management or study skills?", "Who can I talk to if I'm experiencing academic or personal difficulties and need support?", "How can I find out more about academic policies and procedures?", "Can you tell me more about the advising office's role in academic probation or dismissal?", "Who should I contact if I have questions about transfer admission requirements?", "How can I get help with academic planning for my graduate program?", "Can you help me find the email for a particular academic department head?", "What's the best way to prepare for graduate school applications?", "Who can I talk to if I have questions about course prerequisites or waivers?", "How can I find out about student organizations related to my major?", "Can you tell me more about the advising office?", "Where can I find the office hours for Professor Jones?", "How can I reach out to Professor Alex?", "Where can I find out more about how to contact Professor Smith?", "Who can I ask for help finding an internship?", "What are the office hours for Professor Sharon?"]

# Preprocess the training data by converting each word to a vector
tokenizer = tf.keras.preprocessing.text.Tokenizer()
tokenizer.fit_on_texts(course_data + history_data + location_data + advising_data)
course_data = tokenizer.texts_to_sequences(course_data)
history_data = tokenizer.texts_to_sequences(history_data)
location_data = tokenizer.texts_to_sequences(location_data)
advising_data = tokenizer.texts_to_sequences(advising_data)

# Convert the lists of sequences to a 2D numpy array
course_data = tf.keras.preprocessing.sequence.pad_sequences(course_data, maxlen=50)
history_data = tf.keras.preprocessing.sequence.pad_sequences(history_data, maxlen=50)
location_data = tf.keras.preprocessing.sequence.pad_sequences(location_data, maxlen=50)
advising_data = tf.keras.preprocessing.sequence.pad_sequences(advising_data, maxlen=50)

# Define the neural network model
model = tf.keras.models.Sequential([
 tf.keras.layers.Embedding(len(tokenizer.word_index)+1, 64, input_length=50),
 tf.keras.layers.Flatten(),
 tf.keras.layers.Dense(64, activation='relu'),
 tf.keras.layers.Dense(len(categories), activation='softmax')
])

# Compile the model
model.compile(loss='categorical_crossentropy', optimizer='adam', metrics=['accuracy'])

# Train the model on the training data
X = np.concatenate((course_data, history_data, location_data, advising_data), axis=0)
y = np.array([[1, 0, 0, 0]] * len(course_data) + 
              [[0, 1, 0, 0]] * len(history_data) + 
              [[0, 0, 1, 0]] * len(location_data) + 
              [[0, 0, 0, 1]] * len(advising_data))
model.fit(X, y, epochs=50, verbose=0)

# Define a function to classify user input
def classify_input(input_text):
 input_sequence = tokenizer.texts_to_sequences([input_text])
 input_sequence = tf.keras.preprocessing.sequence.pad_sequences(input_sequence, maxlen=50)
 category_index = np.argmax(model.predict(input_sequence))
 return categories[category_index]

def getClases(input):
       matches = re.findall(r'(CMPSC|IST)\s?(\d{3})(w?)', input, re.IGNORECASE)

       if matches:
              course_names = [match[0].upper() + ' ' + match[1] + match[2] for match in matches]
              course_links = ['https://bulletins.psu.edu/search/?search=' + name.replace(' ', '+') + '&psusearchname=%2Fsearch%2F&caturl=%2Fundergraduate' for name in course_names]
              return(course_links)
       else:
              return("No course names found.")

def searchHistory(input):
       link = ['https://www.google.com/search?q=' + input.replace(' ', '+') + 'psu']
       return(link)

def searchLocation(input):
      link = ['https://www.abington.psu.edu/map']
      return(link)

def searchProfessor(input):
       match = re.search(r'(?i)Professor\s(\w+)', input)

       if match:
              professor_name = match.group(1)
              link = ['https://www.abington.psu.edu/directory/results?keys=' + professor_name  +'&type=All']
              return(link)
       else:
              return(f"Professor not found.")
       
def divider():
      print("-------------------------")

# Test the function
print(f"Courses: {len(course_data)} Data Elements")
print(f"History: {len(history_data)} Data Elements")
print(f"Location: {len(location_data)} Data Elements")
print(f"Advising: {len(advising_data)} Data Elements")

input_text1 = "Can you tell me about CMPSC 462"
topic1 = classify_input(input_text1)

input_text2 = "When was the Sutherland Building built?"
topic2 = classify_input(input_text2)

input_text3 = "Where is the Amphitheater?"
topic3 = classify_input(input_text3)

input_text4 = "What is Professor Trofimoff's Email?"
topic4 = classify_input(input_text4)

divider()
print(f"Input: {input_text1}\nTopic: {topic1}") # Course Help
print(f"Response: {getClases(input_text1)}")
divider()
print(f"Input: {input_text2}\nTopic: {topic2}") # University History
print(f"Response: {searchHistory(input_text2)}")
divider()
print(f"Input: {input_text3}\nTopic: {topic3}") # Specific Location
print(f"Response: {searchLocation(input_text3)}")
divider()
print(f"Input: {input_text4}\nTopic: {topic4}") # General Advising
print(f"Response: {searchProfessor(input_text4)}")
divider()